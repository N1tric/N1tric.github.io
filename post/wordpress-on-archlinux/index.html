<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/custom.css">
    <link href="https://fonts.geekzu.org/css2?family=PT+Serif&amp;family=Source+Sans+Pro&amp;display=swap" rel="stylesheet">

    <title>在 ArchLinux 上安装 WordPress | Nutr1t07's Blog</title>
  </head>

  <body>
    <div class="container">
      <div class="sidebar">
        <nav>
            <h3 id="logo">Nutr1t07</h3>
            <ul>
                    <li><a href="/">Index</a></li>
                    <li><a href="/friends">Friends</a></li>
            
            </ul>
        <div id="outline" class="outline">
            <text>Outline</text>
            <div class="outline-ul"><ul>
	<li><a href="#hdr:0">准备工作</a></li>
<li><a href="#hdr:1">安装依赖</a></li>
<li><a href="#hdr:2">配置</a></li>
<ul>
	<li><a href="#hdr:3">Apache</a></li>
<li><a href="#hdr:4">php</a></li>
<li><a href="#hdr:5">数据库</a></li>
<li><a href="#hdr:6">WordPress</a></li>
<li><a href="#hdr:7">服务</a></li>
</ul>
<li><a href="#hdr:8">完成</a></li>
<li><a href="#hdr:9">后记</a></li>
</ul>
</ul>
</div>
        </div>

        </nav>
        &nbsp;
</div>

      <div class="content">
        <h3 id="article-title">在 ArchLinux 上安装 WordPress</h3>
        


        <div id="article-content"><p>鉴于 Archlinux 有世界上最好的包管理器，所以我选择了使用 <code>Arch Linux 2018 Server</code> 作为我的服务器操作系统。</p>
<h4 id="hdr:0">准备工作</h4>
<p>确保在root环境下运行</p>
<h4 id="hdr:1">安装依赖</h4>
<pre><code>$ pacman -Sy apache php php-{cgi,gd,pgsql,apache}
$ pacman -S libmariadbclient mariadb mariadb-clients</code></pre>
<h4 id="hdr:2">配置</h4>
<h5 id="hdr:3">Apache</h5>
<p>打开配置文件 <code>/etc/httpd/conf/httpd.conf</code>：</p>
<ol>
<li>禁用Event MPM，使用Prefork MPM</li><pre><code>#LoadModule mpm_event_module modules/mod_mpm_event.so
LoadModule mpm_prefork_module modules/mod_mpm_prefork.so</code></pre>
<li>添加php支持</li><pre><code>LoadModule php7_module modules/libphp7.so
Include conf/extra/php7_module.conf</code></pre>
<li>启用重写 (保证永久链接可用)</li><pre><code>LoadModule rewrite_module modules/mod_rewrite.so</code></pre>

</ol>
<h5 id="hdr:4">php</h5>
<p>打开配置文件 <code>/etc/php/php.ini</code> 并取消以下拓展的注释：</p>
<pre><code>extension=mysqli
extension=gd
extension=ftp</code></pre>
<h5 id="hdr:5">数据库</h5>
<ol>
<li>初始化MariaDB数据库</li><pre><code>$ mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql</code></pre>
<li>数据库安全设置</li><pre><code>$ mysql_secure_installation</code></pre>
<li>新建数据库</li><p>将 <code>wordpress</code>, <code>wp-user</code>, <code>db_password</code> 替换为自己的名字与密码</p>
<pre><code>$ mysql -u root -p
MariaDB [(none)]&gt; CREATE DATABASE wordpress;
MariaDB [(none)]&gt; GRANT ALL PRIVILEGES ON wordpress.* TO &quot;wp-user&quot;@&quot;localhost&quot; IDENTIFIED BY &quot;db_password&quot;;
MariaDB [(none)]&gt; FLUSH PRIVILEGES;
MariaDB [(none)]&gt; EXIT</code></pre>
<p> </p>

</ol>
<h5 id="hdr:6">WordPress</h5>
<ol>
<li>下载 WordPress</li><pre><code>$ cd /srv/http/
$ wget https://wordpress.org/latest.tar.gz
$ tar xvzf latest.tar.gz
$ cd wordpress</code></pre>
<li>更改权限</li><pre><code>$ chown -R http:http /srv/http/wordpress</code></pre>
<li>使用配置文件模板</li><pre><code>$ cd /srv/http/wordpress
$ cp wp-config-sample.php wp-config.php</code></pre>
<li>更改 wordpress 中数据库信息</li><p>打开 <code>wp-config.php</code>：</p>
<pre><code>define(&#39;DB_NAME&#39;, &#39;wordpress&#39;);
define(&#39;DB_USER&#39;, &#39;wp-user&#39;);
define(&#39;DB_PASSWORD&#39;, &#39;db_password &#39;)</code></pre>

</ol>
<h5 id="hdr:7">服务</h5>
<pre><code>systemctl enable httpd
systemctl enable mysqld.service</code></pre>
<h4 id="hdr:8">完成</h4>
<p>现在可以打开 <a href="http://localhost/wordpress" >http://localhost/wordpress</a> 访问新搭建的博客了。</p>
<h4 id="hdr:9">后记</h4>
<p>然而事实上 WordPress 可能还是不如自己写的好用（<del>因为不会php啦</del>），于是还是回到了 Github Pages 静态页面博客。</p>
</div>
      </div>
    </div>
    


  </body>
</html>
